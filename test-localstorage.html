<!DOCTYPE html>
<html>
<head>
    <title>Test LocalStorage</title>
</head>
<body>
    <h1>Test LocalStorage</h1>
    <div id="output"></div>
    
    <script>
        function testLocalStorage() {
            const output = document.getElementById('output');
            
            // Lấy user từ localStorage
            let user = null;
            try {
                user = JSON.parse(localStorage.getItem('user'));
            } catch (e) {
                user = null;
            }
            
            const role = user?.role || 'user';
            
            output.innerHTML = `
                <h2>Debug Info:</h2>
                <p><strong>User:</strong> ${JSON.stringify(user, null, 2)}</p>
                <p><strong>Role:</strong> ${role}</p>
                <p><strong>Raw localStorage:</strong> ${localStorage.getItem('user')}</p>
            `;
            
            console.log('Debug - User:', user);
            console.log('Debug - Role:', role);
        }
        
        // Test ngay khi load
        testLocalStorage();
        
        // Test lại sau 2 giây
        setTimeout(testLocalStorage, 2000);
    </script>
</body>
</html> 